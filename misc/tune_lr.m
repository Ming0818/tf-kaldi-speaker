clear

t = 1:99;
lr = [0.000100
0.000115
0.000132
0.000152
0.000175
0.000201
0.000231
0.000266
0.000306
0.000352
0.000405
0.000465
0.000535
0.000615
0.000708
0.000814
0.000936
0.001076
0.001238
0.001423
0.001637
0.001882
0.002164
0.002489
0.002863
0.003292
0.003786
0.004354
0.005007
0.005758
0.006621
0.007614
0.008757
0.010070
0.011580
0.013318
0.015315
0.017612
0.020254
0.023292
0.026786
0.030804
0.035425
0.040739
0.046850
0.053877
0.061958
0.071252
0.081940
0.094231
0.108366
0.124621
0.143314
0.164811
0.189532
0.217962
0.250657
0.288255
0.331493
0.381217
0.438400
0.504160
0.579784
0.666751
0.766764
0.881779
1.014046
1.166152
1.341075
1.542237
1.773572
2.039608
2.345549
2.697381
3.101989
3.567287
4.102380
4.717737
5.425397
6.239207
7.175088
8.251351
9.489054
10.912412
12.549274
14.431665
16.596414
19.085877
21.948758
25.241072
29.027233
33.381317
38.388515
44.146792
50.768811
58.384133
67.141753
77.213016
88.794968
102.114213];

loss = [4.193185
4.183946
4.184561
4.189975
4.193369
4.189726
4.191809
4.183677
4.184298
4.183074
4.176251
4.166263
4.166487
4.146907
4.127688
4.136670
4.085684
4.002100
3.739269
3.253395
2.567220
2.251395
2.127435
2.052557
2.083397
2.350093
2.101871
1.962955
1.786614
1.697925
1.663388
1.936430
1.755457
1.779810
1.508225
1.658646
1.316995
1.517517
1.997150
1.569162
1.974387
1.518639
1.603496
1.662125
1.421654
1.565266
1.533762
1.744043
1.545503
1.740608
1.580460
1.815812
1.465210
1.699866
1.636967
1.601486
1.670604
1.344092
1.512825
1.629375
1.564483
1.269312
1.462480
1.130425
1.184826
1.609893
1.268288
1.413859
1.506473
1.482507
1.194267
1.022085
1.057992
1.354926
1.251843
1.423280
1.282834
1.145346
1.336331
1.255492
1.218547
1.231338
1.071302
1.454329
1.304285
1.506533
1.431682
1.467756
1.159601
1.458668
1.454928
1.659801
1.331022
1.419432
1.983366
1.870499
2.297372
2.378380
2.043599
3.056844];

sma = 1;
derivatives = (loss(1+sma:end) - loss(1:end-sma))/sma;
derivatives = filter(ones(1,5)/5,1,derivatives);
figure();
semilogx(lr, loss);
figure();
semilogx(lr(2:end), derivatives)
